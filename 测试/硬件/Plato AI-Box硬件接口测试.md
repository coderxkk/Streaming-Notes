# Plato AI-Box硬件接口测试

## 测试用例
| case                            | 测试步骤                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|---------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 一路POE带载能力                       | 1、在每一路的POE正负都飞出两根线。<br/>2、用网线连接摄像头和网口，连接的网口要和飞出的两根线链路上对应。<br/>3、将模组插到PCB上的卡座上<br/>4、上电。<br/>5、此时摄像头会亮灯，等待熄灭<br/>6、打开电子负载，将电子负载调到恒功率模式，<br/>7、将电子负载的鳄鱼钳夹住POE中飞出的两根线，打开电子负载ON1按键 <br/>8、调节电子负载旋钮，慢慢增大功率，直到电子负载电压示数变为0 <br/>9、换下一路。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <font color="orange">四路POE带载能力运行测试 </font> | 连接4路负载电路板（30W），保证电路板可正常运行                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| MP3910输出功率及温度                   | 1、打开红外热成像仪，对准PCB上面的MP3910芯片<br/>2、从48V正负飞出两根线。 <br/>3、把飞出的两根线连接到电子负载， <br/>4、打开电子负载，将电子负载调到恒功率模式 <br/>5、给板子上电， <br/>6、调节电子负载旋钮，每隔10W递增，直到120W为止。 <br/>7、记录电子负载120W时温度和功率到表格中。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Debug接口(J1907)                  | 1、将串口线一头接电路板，一头连接PC，<br/>2、打开串口助手，115200，8/N/1<br/>3、给电路板上电。 <br/>4、查看串口助手是否打印出信息                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 电源接口                            | 1、给板子上电<br/>2、将万用表拨到直流电压档位 <br/>3、万用表的表笔接触12V的端子                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| HDMI输出                          | 1、用HDMI线连接SE9和显示器<br/>2、插上模组 <br/>3、给显示器和SE9上电                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 系统复位按钮                          | 1、用串口线连接PC和SE9 <br/>2、插上模组 <br/>3、给板子上电 <br/>4、串口助手设置115200,8/N/1。 <br/>5、按下复位键 <br/>6、看log                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 灯板                              | 1、进入系统后，查看灯板状态，<br/>2、执行<br/>cd /sys/class/leds/ <br/>cd pgood-led/ <br/>echo 1 > brightness <br/>观察灯板子上的pgood灯是否点亮 <br/>echo 0 > brightness <br/>观察灯板子上的pgood灯是否点亮                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <font color="orange">网络丢包情况 </font> | 1、网线连接PC和SE9的eth1网口，设置模组和PC为同一网段。<br/>5、iperf3 -c 192.168.1.80 -b 1G -u -l 14720 -t 100（PC发模组收）<br/>6、iperf3 -c 192.168.1.80 -b 1G -u -l 14720 -t 100  -R（PC收模组发）<br/>7、iperf3 -c 192.168.1.80 -b 100M -u -l 1472 -t 100（PC发模组收）<br/>8、iperf3 -c 192.168.1.80 -b 100M -u -l 1472 -t 100 -R（PC收模组发） <br/>9、iperf3 -c 192.168.1.80 -b 600M -u -l 1472 -t 100（PC发模组收） <br/>10、iperf3 -c 192.168.1.80 -b 600M -u -l 1472 -t 100 -R（PC收模组发） <br/>11、eth0测试和eth1测试如法炮制。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| SD card接口                       | 1、lsblk查看哪个分区<br/>2、mount命令挂载SD卡 <br/>3、umount命令解挂                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 风扇接口                            | 1、cvi_pinmux -w GPIO3/PWM11<br/>2、echo 3 > /sys/class/pwm/pwmchip8/export <br/>3、echo 1000000 > /sys/class/pwm/pwmchip8/pwm3/period   ---   设置PWM一个周期的时间 <br/>4、echo 500000 > /sys/class/pwm/pwmchip8/pwm3/duty_cycle  ---   设置pwm占空比为50% <br/>5、echo 1 > /sys/class/pwm/pwmchip8/pwm3/enable   ---  使能PWM                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 凤凰端子 GPIO                       | 1、IO2_OUT测试：依次执行命令：<br/>cvi_pinmux -w IIC4_SCL/GPIO102、<br/>echo 390 > /sys/class/gpio/export、<br/>echo out > /sys/class/gpio/gpio390/direction、<br/>echo 1 > /sys/class/gpio/gpio390/value、<br/>用万用表测试OUT2的电压，<br/>echo 0 > /sys/class/gpio/gpio390/value，<br/>用万用表测试OUT2的电压，<br/>2、IO1_OUT测试：依次执行命令：<br/>cvi_pinmux -w IIC4_SDA/GPIO101<br/>echo 389 > /sys/class/gpio/export、<br/>echo out > /sys/class/gpio/gpio389/direction、<br/>echo 1 > /sys/class/gpio/gpio389/value、<br/>用万用表测试OUT1的电压，<br/>echo 0 > /sys/class/gpio/gpio389/value。<br/>用万用表测试OUT1的电压 <br/>3、IO1_IN测试：<br/>将IO1_IN和IO1_OUT用杜邦线连接起来，依次执行命令：<br/>cvi_pinmux -w IIC5_SDA/GPIO103<br/>echo 391 > /sys/class/gpio/export<br/>echo in > /sys/class/gpio/gpio391/direction<br/>cat /sys/class/gpio/gpio391/value。<br/>查看返回值。<br/>echo 1 > /sys/class/gpio/gpio389/value、<br/>cat /sys/class/gpio/gpio391/value。<br/>查看返回值。 <br/>4、IO2_IN测试：<br/>将IO2_IN和IO2_OUT用杜邦线连接起来，依次执行命令：<br/>cvi_pinmux -w IIC5_SCL/GPIO104、<br/>echo 392 > /sys/class/gpio/export、<br/>echo in > /sys/class/gpio/gpio392/direction。<br/>cat /sys/class/gpio/gpio392/value。<br/>查看返回值。<br/>echo 1 > /sys/class/gpio/gpio390/value、<br/>cat /sys/class/gpio/gpio392/value。<br/>查看返回值。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 凤凰端子 RS232                      | 1、依次执行：<br/>cvi_pinmux -w PAD_MIPI1_TX0N/UART1_RX <br/>cvi_pinmux -w PAD_MIPI1_TX0P/UART1_TX <br/>cvi_pinmux -w PAD_MIPI1_TX2P/UART2_TX <br/>cvi_pinmux -w PAD_MIPI1_TX2N/UART2_RX <br/>cvi_pinmux -r PAD_MIPI1_TX0N <br/>cvi_pinmux -r PAD_MIPI1_TX0P <br/>cvi_pinmux -r PAD_MIPI1_TX2P <br/>cvi_pinmux -r PAD_MIPI1_TX2N <br/>2、设置模组波特率，执行<br/>stty -F /dev/ttyS2 115200 cs8 -cstopb -parenb -crtscts <br/>minicom -D /dev/ttyS2 <br/>3、电脑上打开串口助手，波特率115200、8/N/1<br/>给模组发消息，发现模组那个minicom能接收到消息。<br/> 4、执行ctrl+A、 X 回车退出minicom <br/>5、echo abc > /dev/ttyS2 ---用于发、 <br/>6、串口助手查看接收消息。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 凤凰端子 RS485                      | 设置模组波特率，执行<br/>stty -F /dev/ttyS1 115200 cs8 -cstopb -parenb -crtscts<br/>1、依次执行命令：minicom -D /dev/ttyS1 <br/>2、电脑上打开串口助手，给模组发消息,minicom显示正常。 <br/>3、执行ctrl+A、 X 回车退出minicom <br/>4、echo  abc > /dev/ttyS1 ---用于发 <br/>5、串口助手查看接收消息。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| 两个USB3.0                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
